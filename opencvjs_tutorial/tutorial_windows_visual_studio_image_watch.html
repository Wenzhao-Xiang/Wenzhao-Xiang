<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>OpenCV: Image Watch: viewing in-memory images in the Visual Studio debugger</title>
<link href="opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tutorial-utils.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
//<![CDATA[
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
          fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
          forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
          forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
          vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
          vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
          hdotsfor: ["\\dots", 1],
          mathbbm: ["\\mathbb{#1}", 1],
          bordermatrix: ["\\matrix{#1}", 1]
      }
  }
}
);
//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.1.1-dev</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="tutorial_table_of_content_introduction.html">Introduction to OpenCV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Image Watch: viewing in-memory images in the Visual Studio debugger </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Image Watch is a plug-in for Microsoft Visual Studio that lets you to visualize in-memory images (<em><a class="el" href="d3/d63/classcv_1_1Mat.html" title="n-dimensional dense array class ">cv::Mat</a></em> or <em>IplImage_</em> objects, for example) while debugging an application. This can be helpful for tracking down bugs, or for simply understanding what a given piece of code is doing.</p>
<h2>Prerequisites </h2>
<p>This tutorial assumes that you have the following available:</p>
<ol type="1">
<li>Visual Studio 2012 Professional (or better) with Update 1 installed. Update 1 can be downloaded <a href="http://www.microsoft.com/en-us/download/details.aspx?id=35774">here</a>.</li>
<li>An OpenCV installation on your Windows machine (Tutorial: <a class="el" href="tutorial_windows_install.html">Installation in Windows</a>).</li>
<li>Ability to create and build OpenCV projects in Visual Studio (Tutorial: <a class="el" href="tutorial_windows_visual_studio_opencv.html">How to build applications with OpenCV inside the "Microsoft Visual Studio"</a>).</li>
</ol>
<h2>Installation </h2>
<p><a href="http://go.microsoft.com/fwlink/?LinkId=285460">Download</a> the Image Watch installer. The installer comes in a single file with extension .vsix (<em>Visual Studio Extension</em>). To launch it, simply double-click on the .vsix file in Windows Explorer. When the installer has finished, make sure to restart Visual Studio to complete the installation.</p>
<h2>Example </h2>
<p>Image Watch works with any existing project that uses OpenCV image objects (for example, <em><a class="el" href="d3/d63/classcv_1_1Mat.html" title="n-dimensional dense array class ">cv::Mat</a></em>). In this example, we use a minimal test program that loads an image from a file and runs an edge detector. To build the program, create a console application project in Visual Studio, name it "image-watch-demo", and insert the source code below. </p><div class="fragment"><div class="line"><span class="comment">// Test application for the Visual Studio Image Watch Debugger extension</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span>                        <span class="comment">// std::cout</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d2/ddb/core_2include_2opencv2_2core_2core_8hpp.html">opencv2/core/core.hpp</a>&gt;</span>           <span class="comment">// cv::Mat</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d7/dd8/imgcodecs_2imgcodecs_8hpp.html">opencv2/imgcodecs/imgcodecs.hpp</a>&gt;</span>     <span class="comment">// cv::imread()</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dd/d01/imgproc_2include_2opencv2_2imgproc_2imgproc_8hpp.html">opencv2/imgproc/imgproc.hpp</a>&gt;</span>     <span class="comment">// cv::Canny()</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="d8/dcc/namespacestd.html">std</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="d2/d75/namespacecv.html">cv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> help()</div><div class="line">{</div><div class="line">    cout</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;----------------------------------------------------&quot;</span> &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;This is a test program for the Image Watch Debugger &quot;</span> &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;plug-in for Visual Studio. The program loads an     &quot;</span> &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;image from a file and runs the Canny edge detector. &quot;</span> &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;No output is displayed or written to disk.&quot;</span></div><div class="line">        &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;Usage:&quot;</span>                                               &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;image-watch-demo inputimage&quot;</span>                          &lt;&lt; endl</div><div class="line">        &lt;&lt; <span class="stringliteral">&quot;----------------------------------------------------&quot;</span> &lt;&lt; endl</div><div class="line">        &lt;&lt; endl;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    help();</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (argc != 2)</div><div class="line">    {</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Wrong number of parameters&quot;</span> &lt;&lt; endl;</div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Loading input image: &quot;</span> &lt;&lt; argv[1] &lt;&lt; endl;</div><div class="line">    <a class="code" href="d3/d63/classcv_1_1Mat.html">Mat</a> input;</div><div class="line">    input = <a class="code" href="d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">imread</a>(argv[1], <a class="code" href="d4/da8/group__imgcodecs.html#gga61d9b0126a3e57d9277ac48327799c80af660544735200cbe942eea09232eb822">IMREAD_COLOR</a>);</div><div class="line"></div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Detecting edges in input image&quot;</span> &lt;&lt; endl;</div><div class="line">    <a class="code" href="d3/d63/classcv_1_1Mat.html">Mat</a> edges;</div><div class="line">    <a class="code" href="dd/d1a/group__imgproc__feature.html#ga04723e007ed888ddf11d9ba04e2232de">Canny</a>(input, edges, 10, 100);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Make sure your active solution configuration (Build &ndash;&gt; Configuration Manager) is set to a debug build (usually called "Debug"). This should disable compiler optimizations so that viewing variables in the debugger can work reliably.</p>
<p>Build your solution (Build &ndash;&gt; Build Solution, or press <em>F7</em>).</p>
<p>Before continuing, do not forget to add the command line argument of your input image to your project (Right click on project &ndash;&gt; Properties &ndash;&gt; Configuration Properties &ndash;&gt; Debugging and then set the field Command Arguments with the location of the image).</p>
<p>Now set a breakpoint on the source line that says </p><div class="fragment"><div class="line">Mat edges;</div></div><!-- fragment --><p> To set the breakpoint, right-click on the source line and select Breakpoints &ndash;&gt; Insert Breakpoint from the context menu.</p>
<p>Launch the program in the debugger (Debug &ndash;&gt; Start Debugging, or hit <em>F5</em>). When the breakpoint is hit, the program is paused and Visual Studio displays a yellow instruction pointer at the breakpoint:</p>
<div class="image">
<img src="breakpoint.png" alt="breakpoint.png"/>
</div>
<p>Now you can inspect the state of you program. For example, you can bring up the <em>Locals</em> window (Debug &ndash;&gt; Windows &ndash;&gt; Locals), which will show the names and values of the variables in the current scope:</p>
<div class="image">
<img src="vs_locals.png" alt="vs_locals.png"/>
</div>
<p>Note that the built-in <em>Locals</em> window will display text only. This is where the Image Watch plug-in comes in. Image Watch is like another <em>Locals</em> window, but with an image viewer built into it. To bring up Image Watch, select View &ndash;&gt; Other Windows &ndash;&gt; Image Watch. Like Visual Studio's <em>Locals</em> window, Image Watch can dock to the Visual Studio IDE. Also, Visual Studio will remember whether you had Image Watch open, and where it was located between debugging sessions. This means you only have to do this once&ndash;the next time you start debugging, Image Watch will be back where you left it. Here's what the docked Image Watch window looks like at our breakpoint:</p>
<div class="image">
<img src="toolwindow.jpg" alt="toolwindow.jpg"/>
</div>
<p>The radio button at the top left (<em>Locals/Watch</em>) selects what is shown in the <em>Image List</em> below: <em>Locals</em> lists all OpenCV image objects in the current scope (this list is automatically populated). <em>Watch</em> shows image expressions that have been pinned for continuous inspection (not described here, see <a href="http://go.microsoft.com/fwlink/?LinkId=285461">Image Watch documentation</a> for details). The image list shows basic information such as width, height, number of channels, and, if available, a thumbnail. In our example, the image list contains our two local image variables, <em>input</em> and <em>edges</em>.</p>
<p>If an image has a thumbnail, left-clicking on that image will select it for detailed viewing in the <em>Image Viewer</em> on the right. The viewer lets you pan (drag mouse) and zoom (mouse wheel). It also displays the pixel coordinate and value at the current mouse position.</p>
<div class="image">
<img src="viewer.jpg" alt="viewer.jpg"/>
</div>
<p>Note that the second image in the list, <em>edges</em>, is shown as "invalid". This indicates that some data members of this image object have corrupt or invalid values (for example, a negative image width). This is expected at this point in the program, since the C++ constructor for <em>edges</em> has not run yet, and so its members have undefined values (in debug mode they are usually filled with "0xCD" bytes).</p>
<p>From here you can single-step through your code (Debug-&gt;Step Over, or press <em>F10</em>) and watch the pixels change: if you step once, over the <em>Mat edges;</em> statement, the <em>edges</em> image will change from "invalid" to "empty", which means that it is now in a valid state (default constructed), even though it has not been initialized yet (using <em><a class="el" href="d3/d63/classcv_1_1Mat.html#a55ced2c8d844d683ea9a725c60037ad0" title="Allocates new array data if needed. ">cv::Mat::create()</a></em>, for example). If you make one more step over the <em><a class="el" href="dd/d1a/group__imgproc__feature.html#ga04723e007ed888ddf11d9ba04e2232de" title="Finds edges in an image using the Canny algorithm  . ">cv::Canny()</a></em> call, you will see a thumbnail of the edge image appear in the image list.</p>
<p>Now assume you want to do a visual sanity check of the <em><a class="el" href="dd/d1a/group__imgproc__feature.html#ga04723e007ed888ddf11d9ba04e2232de" title="Finds edges in an image using the Canny algorithm  . ">cv::Canny()</a></em> implementation. Bring the <em>edges</em> image into the viewer by selecting it in the <em>Image List</em> and zoom into a region with a clearly defined edge:</p>
<div class="image">
<img src="edges_zoom.png" alt="edges_zoom.png"/>
</div>
<p>Right-click on the <em>Image Viewer</em> to bring up the view context menu and enable Link Views (a check box next to the menu item indicates whether the option is enabled).</p>
<div class="image">
<img src="viewer_context_menu.png" alt="viewer_context_menu.png"/>
</div>
<p>The Link Views feature keeps the view region fixed when flipping between images of the same size. To see how this works, select the input image from the image list&ndash;you should now see the corresponding zoomed-in region in the input image:</p>
<div class="image">
<img src="input_zoom.png" alt="input_zoom.png"/>
</div>
<p>You may also switch back and forth between viewing input and edges with your up/down cursor keys. That way you can easily verify that the detected edges line up nicely with the data in the input image.</p>
<h2>More ... </h2>
<p>Image watch has a number of more advanced features, such as</p>
<ol type="1">
<li>pinning images to a <em>Watch</em> list for inspection across scopes or between debugging sessions</li>
<li>clamping, thresholding, or diff'ing images directly inside the Watch window</li>
<li>comparing an in-memory image against a reference image from a file</li>
</ol>
<p>Please refer to the online <a href="http://go.microsoft.com/fwlink/?LinkId=285461">Image Watch Documentation</a> for details&ndash;you also can get to the documentation page by clicking on the <em>Help</em> link in the Image Watch window:</p>
<div class="image">
<img src="help_button.jpg" alt="help_button.jpg"/>
</div>
 </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 22 2019 16:32:39 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
